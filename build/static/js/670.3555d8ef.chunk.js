"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[670],{6670:(e,a,r)=>{r.r(a),r.d(a,{default:()=>h});var o=r(5043),n=(r(2847),r(5560)),s=r(7665),t=r(8929),i=r(3768),l=r(8810),c=r(9456),m=r(8271),p=r(9358),d=r(7070),u=r(579);t.A.defaults.baseURL="https://clinica.runasp.net/api/";const h=function(){const e=(0,d.A)(localStorage.getItem("token")).id;console.log(e);const a=(0,c.wA)(),{loading:r}=(0,c.d4)((e=>e.root)),[h,f]=(0,o.useState)([]),[x,w]=(0,o.useState)({specializationId:"",examinationduration:"",name:"",email:"",phoneNumber:"",bio:"",price:0,password:"",confpassword:""});(0,o.useEffect)((()=>{(async()=>{try{const e=await t.A.get("/Specialization");f(e.data)}catch(e){console.error("Error fetching specializations:",e)}})()}),[]),(0,o.useEffect)((()=>{(async()=>{try{a((0,l.r1)(!0));const r=await(0,p.A)(`/Doctor/GetDoctorById?id=${e}`);w({specializationId:r.specializationId||"",examinationduration:r.examinationduration||"",name:r.name||"",email:r.email||"",phoneNumber:r.phoneNumber||"",bio:r.bio||"",price:r.price||0,password:"",confpassword:""}),a((0,l.r1)(!1))}catch(r){console.error("Error fetching doctor data:",r)}})()}),[a]);const g=e=>{const{name:a,value:r}=e.target;return w({...x,[a]:r})};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(s.A,{}),r?(0,u.jsx)(m.A,{}):(0,u.jsx)("section",{className:"register-section flex-center",children:(0,u.jsxs)("div",{className:"profile-container flex-center",children:[(0,u.jsx)("h2",{className:"form-heading",children:"Profile"}),(0,u.jsxs)("form",{onSubmit:async e=>{try{e.preventDefault();const{specializationId:a,examinationduration:r,name:o,email:n,password:s,phoneNumber:l,bio:c,price:m,confpassword:p}=x;if(!n)return i.Ay.error("Email should not be empty");if(o.length<3)return i.Ay.error("Name must be at least 3 characters long");if(s.length<1)return i.Ay.error("Password must be at least 5 characters long");if(s!==p)return i.Ay.error("Passwords do not match");const d={specializationId:a,examinationduration:r,name:o,email:n,password:s,phoneNumber:l,bio:c,price:m};await i.Ay.promise(t.A.put("/Doctor/EditDoctor",d,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),{pending:"Updating profile...",success:"Profile updated successfully",error:"Unable to update profile",loading:"Updating profile..."}),w({...x,password:"",confpassword:""})}catch(a){console.error("Error updating profile:",a)}},className:"register-form",children:[(0,u.jsx)("div",{className:"form-same-row",children:(0,u.jsxs)("select",{name:"specializationId",className:"form-input",value:x.specializationId,onChange:g,children:[(0,u.jsx)("option",{value:"",children:"Select Specialization"}),h.map((e=>(0,u.jsx)("option",{value:e.id,children:e.specializationName},e.id)))]})}),(0,u.jsx)("div",{className:"form-same-row",children:(0,u.jsx)("input",{type:"text",name:"name",className:"form-input",placeholder:"Enter your full name",value:x.name,onChange:g})}),(0,u.jsx)("div",{className:"form-same-row",children:(0,u.jsx)("input",{type:"email",name:"email",className:"form-input",placeholder:"Enter your email",value:x.email,onChange:g})}),(0,u.jsx)("div",{className:"form-same-row",children:(0,u.jsx)("input",{type:"text",name:"phoneNumber",className:"form-input",placeholder:"Enter your mobile number",value:x.phoneNumber,onChange:g})}),(0,u.jsx)("div",{className:"form-same-row",children:(0,u.jsx)("input",{type:"number",name:"examinationduration",className:"form-input",placeholder:"Enter your examination duration",value:x.examinationduration,onChange:g})}),(0,u.jsx)("textarea",{type:"text",name:"bio",className:"form-input",placeholder:"Enter your bio",value:x.bio,onChange:g,rows:"2"}),(0,u.jsx)("div",{className:"form-same-row",children:(0,u.jsx)("input",{type:"number",name:"price",className:"form-input",placeholder:"Enter your price",value:x.price,onChange:g})}),(0,u.jsxs)("div",{className:"form-same-row",children:[(0,u.jsx)("input",{type:"password",name:"password",className:"form-input",placeholder:"Enter your password",value:x.password,onChange:g}),(0,u.jsx)("input",{type:"password",name:"confpassword",className:"form-input",placeholder:"Confirm your password",value:x.confpassword,onChange:g})]}),(0,u.jsx)("button",{type:"submit",className:"btn form-btn",children:"update"})]})]})}),(0,u.jsx)(n.A,{})]})}}}]);
//# sourceMappingURL=670.3555d8ef.chunk.js.map